#!/bin/bash

################################################################################
# ูุฑุงูุจุฉ ุชูุฏู Task 4
################################################################################

LOG_FILE="task4_execution.log"
OUTPUT_FILE="TASK_4_NEGATIVE_OUTPUTS_ONLY.md"

echo "================================================================================"
echo "๐ ูุฑุงูุจุฉ ุชูุฏู Task 4"
echo "================================================================================"
echo ""

while true; do
    clear
    echo "================================================================================"
    echo "๐ Task 4 - ุญุงูุฉ ุงูุชูููุฐ"
    echo "================================================================================"
    echo ""
    echo "โฐ ุงูููุช ุงูุญุงูู: $(date '+%Y-%m-%d %H:%M:%S')"
    echo ""
    
    if [ -f "$LOG_FILE" ]; then
        echo "๐ ุขุฎุฑ 20 ุณุทุฑ ูู ุงูุณุฌู:"
        echo "--------------------------------------------------------------------------------"
        tail -n 20 "$LOG_FILE"
        echo "--------------------------------------------------------------------------------"
        echo ""
        
        # Count progress
        COMPLETED=$(grep -c "โ\|โ" "$LOG_FILE" 2>/dev/null || echo "0")
        PASSED=$(grep -c "โ" "$LOG_FILE" 2>/dev/null || echo "0")
        FAILED=$(grep -c "โ" "$LOG_FILE" 2>/dev/null || echo "0")
        
        echo "๐ ุงูุฅุญุตุงุฆูุงุช:"
        echo "  - ููุชูู: $COMPLETED / 450"
        echo "  - โ ูุฌุญ: $PASSED"
        echo "  - โ ูุดู: $FAILED"
        
        if [ $COMPLETED -gt 0 ]; then
            PERCENTAGE=$((COMPLETED * 100 / 450))
            echo "  - ุงูุชูุฏู: $PERCENTAGE%"
        fi
    else
        echo "โณ ูู ุงูุชุธุงุฑ ุจุฏุก ุงูุชูููุฐ..."
    fi
    
    echo ""
    echo "================================================================================"
    echo "ุงุถุบุท Ctrl+C ููุฎุฑูุฌ ูู ุงููุฑุงูุจุฉ (ุงูุณูุฑุจุช ุณูุณุชูุฑ ูู ุงูุนูู)"
    echo "================================================================================"
    
    # Check if completed
    if [ -f "$OUTPUT_FILE" ]; then
        echo ""
        echo "โ ุงูุชูู ุงูุชูููุฐ! ุงูุชูุฑูุฑ ูุชุงุญ ูู: $OUTPUT_FILE"
        break
    fi
    
    sleep 10
done

